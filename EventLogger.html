<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="location">Barratt Inn Event Logger</title>


    <!--
    SSSSS  TTTTTTTTT  Y   Y   L     EEEEE  SSSSS
    S         TT       Y Y   L      E     S
    SSSS     TT        Y    L      EEEE   SSSS
        S    TT        Y    L      E          S
    SSSSS     TT        Y    LLLLL  EEEEE  SSSSS
    -->


    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            transition: background-color 0.5s, color 0.5s;
        }

        body.dark-mode {
            background-color: #333;
            color: #fff;
        }

        h2 {
            color: #007bff;
        }

        nav {
            margin-bottom: 20px;
        }

        nav a {
            margin-right: 20px;
            text-decoration: none;
            color: #007bff;
        }

        nav a:hover {
            text-decoration: underline;
        }

        #colorPalette {
            display: inline-block;
            margin-right: 10px;
            vertical-align: middle;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background-color: #fff;
            color: #333;
            transition: background-color 0.5s, color 0.5s;
        }

        table.dark-mode {
            background-color: #444;
            color: #fff;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        /* for color selection swatches */
        .swatch {
            width: 20px;
            height: 20px;
            display: inline-block;
            margin-right: 5px;
            cursor: pointer;
            border: 1px solid #888;
        }

        .swatch[data-color="#FFC0CB"] {
            background-color: #FFC0CB;
        }

        .swatch[data-color="#ADD8E6"] {
            background-color: #ADD8E6;
        }

        .swatch[data-color="#98FB98"] {
            background-color: #98FB98;
        }

        .swatch[data-color="#F0E68C"] {
            background-color: #F0E68C;
        }

        .swatch[data-color="#FFD700"] {
            background-color: #FFD700;
        }

        .swatch[data-color="#FFA07A"] {
            background-color: #FFA07A;
        }

        .swatch[data-color="#D8BFD8"] {
            background-color: #D8BFD8;
        }

        .swatch[data-color="#DDA0DD"] {
            background-color: #DDA0DD;
        }

        .color-swatch {
            width: 20px;
            height: 20px;
            display: inline-block;
            vertical-align: middle;
            margin-right: 5px;
        }

        .color-cell {
            display: flex;
            align-items: center;
            justify-content: center;
            vertical-align: middle;
        }

        button {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>


<!--
    H   H  TTTTTTTTT  M       M  L         BBBBB  OOOO  DDDDD   Y   Y
    H   H     TT     M M   M M  L          B   B O   O   D   D   Y Y
    HHHHH     TT     M  M M  M  L          BBBBB O   O   D   D    Y
    H   H     TT     M   M   M  L          B   B O   O   D   D    Y
    H   H     TT     M       M  LLLLL      BBBBB  OOOO  DDDDD     Y
    -->



<body class="dark-mode">
    <nav>
        <a href="#" onclick="showEventSection()">Event Logger</a>
        <a href="#" onclick="showEmployeeSection()">Employee Manager</a>
        <button onclick="toggleDarkMode()">Toggle Dark Mode</button>
    </nav>

    <div id="eventSection">
        <h2>Event Logger</h2>

        <form id="eventForm">
            <label for="empSelect">Select Employee:</label>
            <select id="empSelect" name="empSelect" required>
                <!-- Employee options will be dynamically added here -->
            </select>
            <br>
            <label for="eventTime" required>Event Date and Time:</label>
            <input type="datetime-local" id="eventTime" name="eventTime" required>
            <button type="button" onclick="populateCurrentTime()">Current Time</button>
            <br>
            <label for="eventText" required>Event:</label>
            <textarea id="eventText" name="eventText" rows="4" required></textarea>
            <br>
            <button type="button" onclick="addEvent()">Add Event</button>
            <span id="errorMessage" style="color: red; margin-left: 10px;"></span>

        </form>

        <table id="eventTable">
            <thead>
                <tr>
                    <th>Employee</th>
                    <th>Event Time</th>
                    <th>Event Text</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <button onclick="downloadEventsAsXML()">Export Events to XML</button>


    <div id="employeeSection" style="display: none;">
        <h2>Employee Manager</h2>

        <form id="employeeForm">
            <label for="empName">Employee Name:</label>
            <input type="text" id="empName" name="empName" required>
            <br>
            <label for="empPhone">Phone Number:</label>
            <input type="tel" id="empPhone" name="empPhone" required pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}">
            <br>
            <label for="empColor">Color Code:</label>
            <input type="color" id="empColor" name="empColor" value="#000000">
            <div id="colorPalette">
                <div class="swatch" data-color="#FFC0CB"></div> <!-- Pink -->
                <div class="swatch" data-color="#ADD8E6"></div> <!-- Light Blue -->
                <div class="swatch" data-color="#98FB98"></div> <!-- Pale Green -->
                <div class="swatch" data-color="#F0E68C"></div> <!-- Khaki -->
                <div class="swatch" data-color="#FFD700"></div> <!-- Gold -->
                <div class="swatch" data-color="#FFA07A"></div> <!-- Light Salmon -->
                <div class="swatch" data-color="#D8BFD8"></div> <!-- Thistle -->
                <div class="swatch" data-color="#DDA0DD"></div> <!-- Plum -->
            </div>
            <br>
            <label for="empStartTime">Start Time:</label>
            <input type="time" id="empStartTime" name="empStartTime" required>
            <br>
            <label for="empEndTime">End Time:</label>
            <input type="time" id="empEndTime" name="empEndTime" required>
            <br>
            <button type="button" onclick="addEditEmployee()">Add/Edit Employee</button>
            <span id="employeeErrorMessage" style="color: red;"></span>
        </form>

        <table id="employeeTable">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Phone Number</th>
                    <th>Color Code</th>
                    <th>Start Time</th>
                    <th>End Time</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <br><br>
    <div id="importedEventsSection">
        <h2>Imported Events</h2>
        <table id="importedEventTable">
            <thead>
                <tr>
                    <th>Employee</th>
                    <th>Event Time</th>
                    <th>Event Text</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <!-- Rows will be populated dynamically -->
            </tbody>
        </table>

        <button type="button" onclick="importXML()">Import XML</button>
    </div>

    <!--
    JJJJJJJJ  AAAAA  V       V   AAAAA  SSSSS  CCCCC  RRRRR    IIII II  PPPPPP  TTTTTTTTT
        JJ   A     A  V     V   A     A S      C      R    RR     II    P    PP    TT
        JJ   AAAAAAA   V   V    AAAAAAA  SSSS  C      RRRRR       II    PPPPPP     TT
    JJ  JJ   A     A    V V     A     A      S C      R  RR       II    P          TT
    JJJJ   A     A     V      A     A  SSSSS  CCCCC  R   R     IIIIII  P          TT
    -->


    <script>

        const employees = JSON.parse(localStorage.getItem('employees')) || [];
        const events = JSON.parse(localStorage.getItem('events')) || [];
        const importedEvents = JSON.parse(localStorage.getItem('importedEvents')) || [];

        // Initial population of tables
        updateEventTable();
        updateEmployeeTable();
        updateImportedEventTable();
        // Populate employee dropdown
        const empSelect = document.getElementById('empSelect');
        populateEmployeeOptions();
        populateImportedEventsTable();


        /*
        EEEEE  V       V  EEEEE  N   N TTTTT  SSSSS 
        E      V     V   E      NN  N    T    S
        EEEE    V   V    EEEE   N N N    T     SSSS
        E        V V     E      N  NN    T        S
        EEEEE     V      EEEEE  N   N    T    SSSSS
        */


        function populateCurrentTime() {
            const now = new Date();
            const year = now.getFullYear();
            const month = (now.getMonth() + 1).toString().padStart(2, '0');  // months are 0-indexed in JavaScript
            const day = now.getDate().toString().padStart(2, '0');
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const formattedDateTime = `${year}-${month}-${day} ${hours}:${minutes}`;

            document.getElementById('eventTime').value = formattedDateTime;
        }


        function addEvent() {

            const empName = document.getElementById('empSelect').value;
            const eventTime = document.getElementById('eventTime').value;
            const eventText = document.getElementById('eventText').value;
            const errorMessage = document.getElementById('errorMessage');

            // Check for validation
            if (!eventTime || !eventText) {
                errorMessage.textContent = 'Please fill out the required fields!';
                return;  // Exit the function if validation fails
            } else {
                errorMessage.textContent = '';  // Clear the error message if validation passes
            }

            const employee = employees.find(emp => emp.name === empName);
            const bgColor = employee ? employee.color : '#FFF';  // Default to white if not found

            const eventObj = { empName, eventTime, eventText, bgColor };
            events.push(eventObj);

            // Save events to localStorage
            localStorage.setItem('events', JSON.stringify(events));

            // Update the event table
            updateEventTable();

            // Clear the fields
            document.getElementById('eventForm').reset();
        }


        function deleteEvent(index) {
            // Remove the event from the events array
            events.splice(index, 1);

            // Save events to localStorage
            localStorage.setItem('events', JSON.stringify(events));

            // Update the event table
            updateEventTable();
        }

        function updateEventTable() {
            const tableBody = document.querySelector('#eventTable tbody');
            tableBody.innerHTML = '';

            events.forEach((eventItem, index) => {
                const row = tableBody.insertRow();
                // Get the color of the employee for this event
                const employee = employees.find(emp => emp.name === eventItem.empName);
                if (employee) {
                    row.style.backgroundColor = employee.color;
                }
                row.insertCell(0).textContent = eventItem.empName;
                row.insertCell(1).textContent = eventItem.eventTime;
                row.insertCell(2).textContent = eventItem.eventText;

                // Actions cell for holding the buttons
                const actionsCell = row.insertCell(3);

                // Edit button
                const editButton = document.createElement('button');
                editButton.textContent = 'Edit';
                editButton.addEventListener('click', () => startEdit(row, eventItem));  // Pass the event object directly using eventItem instead of eventObj
                actionsCell.appendChild(editButton);

                // Delete button
                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'Delete';
                deleteButton.addEventListener('click', () => deleteEvent(index));
                actionsCell.appendChild(deleteButton);
            });
        }

        function startEdit(row) {
            const eventTextCell = row.cells[2]; // Get the third cell (0-indexed) from the row
            const originalText = eventTextCell.textContent;

            // Create an input element for editing
            const input = document.createElement('input');
            input.type = 'text';
            input.value = originalText;

            // Clear the cell and append the input
            eventTextCell.innerHTML = '';
            eventTextCell.appendChild(input);

            // Add a "Save" button
            const saveButton = document.createElement('button');
            saveButton.textContent = 'Save';
            saveButton.addEventListener('click', () => {
                const updatedText = input.value;

                // Update the eventText in the event object directly
                eventTextCell.innerHTML = updatedText;
            });

            // Add the "Save" button next to the input
            eventTextCell.appendChild(saveButton);
        }


        function showEventSection() {
            document.getElementById('eventSection').style.display = 'block';
            document.getElementById('employeeSection').style.display = 'none';
            document.getElementById('importedEventsSection').style.display = 'block';  // Display the imported events table
        }

        /*
EEEEE  M       M  PPPPPP  L         OOOO  Y   Y  EEEEE  EEEEE   SSSSS
E      M M   M M  P    PP L        O   O   Y Y   E      E       S
EEEE   M  M M  M  PPPPPP  L        O   O    Y    EEEE   EEEEE   SSSS
E      M   M   M  P       L        O   O    Y    E      E           S
EEEEE  M       M  P       LLLLL     OOOO    Y    EEEEE  EEEEE   SSSSS
*/


        //Validation
        function validateEmployeeForm(excludeName = null) {
            const empName = document.getElementById('empName').value.trim();
            const empStartTime = document.getElementById('empStartTime').value;
            const empEndTime = document.getElementById('empEndTime').value;

            const errorMessage = [];

            // Check if fields are filled
            if (!empName) {
                errorMessage.push("Employee Name is required.");
            }
            if (!empStartTime) {
                errorMessage.push("Start Time is required.");
            }
            if (!empEndTime) {
                errorMessage.push("End Time is required.");
            }

            // Check for duplicate employee names
            if (employees.some(emp => emp.name.toLowerCase() === empName.toLowerCase() && emp.name.toLowerCase() !== excludeName?.toLowerCase())) {
                errorMessage.push("An employee with this name already exists.");
            }

            // Check if end time is after start time
            if (empStartTime && empEndTime && empStartTime >= empEndTime) {
                errorMessage.push("End Time must be after Start Time.");
            }

            // If there are any error messages, join them and return
            if (errorMessage.length) {
                return errorMessage.join(" ");
            }

            // If everything is valid
            return null;
        }
        // Color Selector Swatches
        document.querySelectorAll('.swatch').forEach(swatch => {
            swatch.addEventListener('click', function () {
                const color = this.getAttribute('data-color');
                document.getElementById('empColor').value = color;
            });
        });

        let employeeBeingEdited = null;
        function addEditEmployee() {
            const empName = document.getElementById('empName').value.trim();
            const empPhone = document.getElementById('empPhone').value.trim();
            const empColor = document.getElementById('empColor').value;
            const empStartTime = document.getElementById('empStartTime').value;
            const empEndTime = document.getElementById('empEndTime').value;

            const validationError = employeeBeingEdited ? validateEmployeeForm(employeeBeingEdited.name) : validateEmployeeForm();

            if (validationError) {
                alert(validationError);
                return;
            }

            if (employeeBeingEdited) {
                // Editing
                employeeBeingEdited.name = empName;
                employeeBeingEdited.phone = empPhone;
                employeeBeingEdited.color = empColor;
                employeeBeingEdited.startTime = empStartTime;
                employeeBeingEdited.endTime = empEndTime;
                employeeBeingEdited = null;  // Reset after editing
            } else {
                // Adding
                const employee = { name: empName, phone: empPhone, color: empColor, startTime: empStartTime, endTime: empEndTime };
                employees.push(employee);
            }

            // Save to localStorage and update tables
            localStorage.setItem('employees', JSON.stringify(employees));
            updateEmployeeTable();
            populateEmployeeOptions();

            // Update the event table to reflect the color changes.
            updateEventTable();

            // Clear the form
            document.getElementById('employeeForm').reset();
            // Reset the employee dropdown
            document.getElementById('empSelect').value = "";
        }

        function editEmployee(employee) {
            // Populate the form with the employee's data
            document.getElementById('empName').value = employee.name;
            document.getElementById('empPhone').value = employee.phone;
            document.getElementById('empColor').value = employee.color;
            document.getElementById('empStartTime').value = employee.startTime;
            document.getElementById('empEndTime').value = employee.endTime;

            // Set the global variable employeeBeingEdited to this employee
            employeeBeingEdited = employee;
        }

        function deleteEmployee(name) {
            // Remove the employee from the employees array
            const index = employees.findIndex(emp => emp.name === name);
            if (index !== -1) {
                employees.splice(index, 1);

                // Save employees to localStorage
                localStorage.setItem('employees', JSON.stringify(employees));

                // Update the employee table and dropdown
                updateEmployeeTable();
                populateEmployeeOptions();
            }
        }

        function updateEmployeeTable() {
            const tableBody = document.querySelector('#employeeTable tbody');
            tableBody.innerHTML = '';

            employees.forEach(employee => {
                const row = tableBody.insertRow();
                row.insertCell(0).textContent = employee.name;
                row.insertCell(1).textContent = employee.phone;
                const colorCell = row.insertCell(2);
                colorCell.classList.add('color-cell');
                const colorSwatch = document.createElement('div');
                colorSwatch.className = 'color-swatch';
                colorSwatch.style.backgroundColor = employee.color;
                colorCell.appendChild(colorSwatch);
                row.insertCell(3).textContent = employee.startTime;
                row.insertCell(4).textContent = employee.endTime;
                const actionsCell = row.insertCell(5);
                const editButton = document.createElement('button');
                editButton.textContent = 'Edit';
                editButton.addEventListener('click', () => editEmployee(employee));
                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'Delete';
                deleteButton.addEventListener('click', () => deleteEmployee(employee.name));
                actionsCell.appendChild(editButton);
                actionsCell.appendChild(deleteButton);
            });
        }

        function populateEmployeeOptions() {
            empSelect.innerHTML = '';

            employees.forEach(employee => {
                const option = document.createElement('option');
                option.value = employee.name;
                option.textContent = employee.name;
                empSelect.appendChild(option);
            });
        }

        function showEmployeeSection() {
            document.getElementById('eventSection').style.display = 'none';
            document.getElementById('employeeSection').style.display = 'block';
            document.getElementById('importedEventsSection').style.display = 'none';  // Hide the imported events table
        }



        /*
EEEEE  X   X  PPPPPP  OOOO  RRRRR  TTTTTTT
E       X X   P    PP O   O R    RR    TT
EEEE     X    PPPPPP  O   O RRRRR      TT
E       X X   P       O   O R  RR      TT
EEEEE  X   X  P        OOOO  R   R     TT
*/

        function eventsToXML(events) {
            let xml = '<?xml version="1.0" encoding="UTF-8"?>\n';
            xml += '<events>\n';

            events.forEach(event => {
                xml += '  <event>\n';
                xml += `    <empName>${event.empName}</empName>\n`;
                xml += `    <eventTime>${event.eventTime}</eventTime>\n`;
                xml += `    <eventText>${event.eventText}</eventText>\n`;
                xml += `    <colorCode>${event.bgColor}</colorCode>\n`;
                xml += '  </event>\n';
            });

            xml += '</events>';

            return xml;
        }

        function downloadEventsAsXML() {
            const xmlString = eventsToXML(events);
            const date = getFormattedDateTime();
            // Create a Blob from the XML string
            const blob = new Blob([xmlString], { type: 'application/xml' });

            // Create a temporary download link
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = document.getElementById('location').innerHTML + date + '.xml';

            // Append the link temporarily to the document and simulate a click
            document.body.appendChild(link);
            link.click();

            // Clean up: remove the temporary link
            document.body.removeChild(link);
        }




        /*
IIIIII  M       M  PPPPPP  OOOO  RRRRR  TTTTTTT
  II    M M   M M  P    PP O   O R    RR   TT
  II    M  M M  M  PPPPPP  O   O RRRRR     TT
  II    M   M   M  P       O   O R  RR     TT
IIIIII  M       M  P        OOOO  R   R     TT
*/




        // Function to handle XML file input and import data
        function handleXMLFileInput(event) {
            const file = event.target.files[0];
            const reader = new FileReader();

            reader.onload = function (e) {
                const xmlString = e.target.result;
                parseXML(xmlString);
            };

            reader.readAsText(file);
        }

        // Function to populate the imported events table
        function populateImportedEventsTable() {
            const tableBody = document.querySelector('#importedEventTable tbody');
            tableBody.innerHTML = '';

            importedEvents.forEach(event => {
                addRowToImportedEvents(event.employee, event.eventTime, event.eventText, event.colorCode);
            });
        }

        function importXML() {
            // Create an input element for file selection
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.xml';

            // Listen for the file selection
            input.addEventListener('change', handleFileSelect);

            // Trigger a click event to open the file dialog
            input.click();

            // Define the function to handle file selection
            function handleFileSelect(event) {
                const file = event.target.files[0];
                const reader = new FileReader();

                reader.onload = function (e) {
                    const xmlString = e.target.result;
                    parseXML(xmlString);
                };

                reader.readAsText(file);
            }

            // Define the function to parse XML data
            function parseXML(xmlString) {
                // Create a DOMParser
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(xmlString, 'application/xml');

                // Get the events from the parsed XML
                const events = xmlDoc.querySelectorAll('event');

                // Iterate through the events and populate the "Imported Events" table
                events.forEach(event => {
                    // Extract data from the XML elements (e.g., employee, eventTime, eventText)
                    const employee = event.querySelector('empName')?.textContent || '';
                    const eventTime = event.querySelector('eventTime')?.textContent || '';
                    const eventText = event.querySelector('eventText')?.textContent || '';
                    let colorCode = event.querySelector('colorCode')?.textContent;
                    if (!colorCode) {
                        const matchedEmployee = employees.find(e => e.name === employee);
                        colorCode = matchedEmployee ? matchedEmployee.color : '#FFF';
                    }
                    //debug
                    console.log("Parsed colorCode: ", colorCode);


                    // Add a new row to the "Imported Events" table with the extracted data
                    addRowToImportedEvents(employee, eventTime, eventText, colorCode);
                    //debug
                    console.log("Setting row color:", colorCode);


                    // Append to the importedEvents array
                    importedEvents.push({ employee, eventTime, eventText, colorCode });
                });
                // Update local storage after parsing all events
                localStorage.setItem('importedEvents', JSON.stringify(importedEvents));
            }
        }

        function addRowToImportedEvents(employee, eventTime, eventText, colorCode) {
            const tableBody = document.querySelector('#importedEventTable tbody');
            const row = tableBody.insertRow();

            row.insertCell(0).textContent = employee;
            row.insertCell(1).textContent = eventTime;
            row.insertCell(2).textContent = eventText;
        }

        function addRowToImportedEvents(employee, eventTime, eventText, colorCode) {
            const tableBody = document.querySelector('#importedEventTable tbody');
            const row = tableBody.insertRow();
            row.style.backgroundColor = colorCode;

            const cell1 = row.insertCell(0);
            const cell2 = row.insertCell(1);
            const cell3 = row.insertCell(2);
            const cell4 = row.insertCell(3);

            cell1.textContent = employee;
            cell2.textContent = eventTime;
            cell3.textContent = eventText;

            // Create "Edit" button
            const editButton = document.createElement('button');
            editButton.textContent = 'Edit';
            editButton.onclick = () => startEdit(row);
            cell4.appendChild(editButton);

            // Create "Delete" button
            const deleteButton = document.createElement('button');
            deleteButton.textContent = 'Delete';
            deleteButton.onclick = () => deleteImportedEvent(deleteButton);
            cell4.appendChild(deleteButton);
        }


        function updateImportedEventTable() {
            const tableBody = document.querySelector('#importedEventTable tbody');
            tableBody.innerHTML = '';

            importedEvents.forEach((event, index) => {
                const row = tableBody.insertRow();
                row.insertCell(0).textContent = event.empName;
                row.insertCell(1).textContent = event.eventTime;
                row.insertCell(2).textContent = event.eventText;
                const actionsCell = row.insertCell(3);
                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'Delete';
                deleteButton.addEventListener('click', () => deleteImportedEvent(index));
                actionsCell.appendChild(deleteButton);
            });
        }

        function deleteImportedEvent(buttonClicked) {
            // Determine the row and employee name for the clicked button
            const rowToDelete = buttonClicked.closest('tr');
            const empName = rowToDelete.cells[0].textContent;

            // Find the index of the event with the given employee name
            const index = importedEvents.findIndex(event => event.empName === empName);

            // Remove the event from the importedEvents array
            importedEvents.splice(index, 1);

            // Remove the specific row from the table
            rowToDelete.remove();

            // Save importedEvents to localStorage
            localStorage.setItem('importedEvents', JSON.stringify(importedEvents));
        }

        function getFormattedDateTime() {
            const now = new Date();
            const year = now.getFullYear();
            const month = (now.getMonth() + 1).toString().padStart(2, '0');
            const day = now.getDate().toString().padStart(2, '0');
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');

            return `${year}-${month}-${day}_${hours}-${minutes}-${seconds}`;
        }


        function toggleDarkMode() {
            const body = document.body;
            body.classList.toggle('dark-mode');
            const tables = document.querySelectorAll('table');
            tables.forEach(table => table.classList.toggle('dark-mode'));
        }
    </script>
</body>

</html>